<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SimHealth — PGSI Self-check</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/assets/styles.css">
  <script src="/assets/theme.js"></script>

  <style>
    .page-head{ margin:16px 0 10px; }
    .page-head h2{ margin:0 0 8px; font-size:22px; }
    .page-head p{ margin:0; color:var(--muted); line-height:1.65; }

    .notice{
      margin-top:14px;
      background: color-mix(in srgb, var(--warn) 12%, transparent);
      border: 1px solid color-mix(in srgb, var(--warn) 28%, transparent);
      border-radius: var(--radius-lg);
      padding: 14px;
      color: var(--muted);
      line-height: 1.55;
    }
    .notice strong{ color: var(--text); }

    .meta-row{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:color-mix(in srgb, var(--text) 6%, transparent);
      color:var(--text);
      font-weight:800;
      letter-spacing:.2px;
      user-select:none;
      white-space:nowrap;
    }

    .qwrap{ margin-top:16px; }
    .q{
      margin-top:14px;
      padding:16px;
      border-radius:var(--radius-xl);
      border:1px solid var(--border);
      background:var(--surface);
    }
    .q h3{
      margin:0 0 10px;
      font-size:16px;
      line-height:1.45;
    }
    .options{
      display:grid;
      grid-template-columns:repeat(12, 1fr);
      gap:10px;
      margin-top:8px;
    }
    .opt{
      grid-column: span 6;
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:12px 12px;
      border-radius:var(--radius-lg);
      border:1px solid var(--border);
      background:color-mix(in srgb, var(--text) 4%, transparent);
      cursor:pointer;
      user-select:none;
      transition: transform var(--t-fast) var(--ease), background var(--t-fast) var(--ease), border-color var(--t-fast) var(--ease);
    }
    .opt:hover{ transform: translateY(-1px); }
    .opt:active{ transform: translateY(0px); }
    .opt input{ margin-top:3px; }
    .opt b{ color:var(--text); }
    .opt span{ color:var(--muted); font-size:13px; line-height:1.45; }

    .actions{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    button.btn-primary{
      border:none;
      cursor:pointer;
    }

    .status{
      display:none;
      margin-top:14px;
      border-radius:var(--radius-lg);
      border:1px solid var(--border);
      padding:12px 14px;
      line-height:1.55;
      color:var(--muted);
      background:color-mix(in srgb, var(--text) 4%, transparent);
    }
    .status.show{ display:block; }
    .status.good{
      background:color-mix(in srgb, var(--primary) 14%, transparent);
      border-color:color-mix(in srgb, var(--primary) 35%, var(--border));
      color:var(--text);
    }
    .status.warn{
      background:color-mix(in srgb, var(--warn) 12%, transparent);
      border-color:color-mix(in srgb, var(--warn) 30%, var(--border));
      color:var(--text);
    }
    .status.risk{
      background:color-mix(in srgb, #ef4444 14%, transparent);
      border-color:color-mix(in srgb, #ef4444 32%, var(--border));
      color:var(--text);
    }
    .status h4{ margin:0 0 8px; }
    .status p{ margin:0; color:var(--muted); line-height:1.6; }
    .status p strong{ color:var(--text); }
    .status .row{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .fine{
      margin-top:12px;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
    }
    .fine a{ color:var(--text); text-decoration:underline; }

    @media (max-width: 800px){
      .opt{ grid-column: span 12; }
      .page-head h2{ font-size:20px; }
    }
  </style>
</head>

<body>

  <div class="banner">
    <strong>Healthcare first.</strong> This page is informational. If you’re in immediate danger or at risk of self-harm, call your local emergency number now.
  </div>

  <header class="nav">
    <a class="brand" href="/index.html" aria-label="Back to language selection">SimHealth</a>

    <!-- Mobile: Menu button -->
    <button class="nav-toggle" type="button"
      onclick="SimHealthNav.toggleMenu()"
      aria-label="Open menu"
      aria-expanded="false"
      aria-controls="main-menu">
      Menu <span class="chev">▾</span>
    </button>

    <nav class="menu" id="main-menu" aria-label="Main navigation">
      <a class="link" href="/en/home/">Home</a>
      <a class="link active" href="/en/patients/">Patients</a>
      <a class="link" href="/en/clinicians/">Clinicians</a>
      <a class="link" href="/en/research/">Research</a>
      <a class="link" href="/en/about/">About</a>
      <a class="link" href="/en/contact/">Contact</a>

      <a class="btn-primary" href="/en/patients/help-support/">Crisis Resources</a>

      <div class="lang-toggle" aria-label="Language">
        <a class="active" href="/en/patients/pgsi/">
          <span class="lang-full">English</span>
          <span class="lang-short" aria-hidden="true">EN</span>
        </a>
        <a href="/fr/patients/pgsi/">
          <span class="lang-full">Français</span>
          <span class="lang-short" aria-hidden="true">FR</span>
        </a>
      </div>

      <div class="theme-toggle" role="button" tabindex="0"
           onclick="SimHealthTheme.toggleTheme()"
           onkeydown="if(event.key==='Enter' || event.key===' ') { event.preventDefault(); SimHealthTheme.toggleTheme(); }"
           aria-label="Toggle theme">
        <span class="label label-dark">Dark</span>
        <span class="track" aria-hidden="true"><span class="thumb"></span></span>
        <span class="label label-light">Light</span>
      </div>
    </nav>
  </header>

  <main class="wrap">

    <section class="hero">
      <!-- NOTE: change back to /assets/patient.jpg if that's the real filename -->
      <div class="hero-bg" style="background-image:url('/assets/patients.jpg');"></div>
      <div class="hero-overlay"></div>

      <div class="hero-content">
        <h1 class="rise-1">PGSI self-check</h1>
        <p class="rise-2">
          A short, validated questionnaire used internationally to screen for gambling-related risk over the last 12 months.
          This is not a diagnosis — it’s a structured self-check.
        </p>

        <div class="hero-actions rise-3">
          <a class="btn-primary" href="#quiz">Start the self-check</a>
          <a class="btn-secondary" href="/en/patients/help-support/">Crisis Resources</a>
          <a class="btn-secondary" href="/en/patients/">Back to Patients</a>
        </div>

        <div class="notice" style="margin-top:14px;">
          <strong>If you feel unsafe right now:</strong> use
          <a href="/en/patients/help-support/" style="color:var(--text); text-decoration:underline;">Crisis Resources</a>
          or call your local emergency number. This website is not monitored as an emergency service.
        </div>
      </div>
    </section>

    <div class="page-head">
      <h2>How it works</h2>
      <p>
        Answer each question based on your experiences in the <strong style="color:var(--text);">last 12 months</strong>.
        Your score is calculated locally in your browser — SimHealth does not store your answers on this page.
      </p>

      <div class="meta-row" aria-label="Questionnaire details">
        <span class="chip">9 questions</span>
        <span class="chip">Time: ~2 minutes</span>
        <span class="chip">Scored locally (privacy-first)</span>
      </div>

      <div class="notice">
        <strong>Important:</strong> This tool can be emotionally activating.
        If you notice distress rising, pause and use
        <a href="/en/patients/help-support/" style="color:var(--text); text-decoration:underline;">Crisis Resources</a>
        or speak to a professional you trust.
      </div>
    </div>

    <section class="card" id="quiz" style="margin-top:16px;">
      <h2 style="margin:0 0 8px;">PGSI questionnaire</h2>
      <p style="margin:0; color:var(--muted); line-height:1.65;">
        Select one option per question:
        <strong style="color:var(--text);">Never (0)</strong>,
        <strong style="color:var(--text);">Sometimes (1)</strong>,
        <strong style="color:var(--text);">Most of the time (2)</strong>,
        <strong style="color:var(--text);">Almost always (3)</strong>.
      </p>

      <form id="pgsiForm" class="qwrap" aria-label="PGSI form"></form>

      <div class="actions">
        <button class="btn-primary" id="calcBtn" type="button">Calculate score</button>
        <button class="btn-secondary" id="resetBtn" type="button">Reset</button>
        <a class="btn-secondary" href="/en/patients/help-support/">Help &amp; support</a>
      </div>

      <div id="resultBox" class="status" role="status" aria-live="polite"></div>

      <p class="fine">
        The PGSI (Problem Gambling Severity Index) is widely used as a screening measure in population and service settings.
        This page is informational and does not provide medical advice.
        If you want to talk to someone today, use <a href="/en/patients/help-support/">Crisis Resources</a>.
      </p>
    </section>

  </main>

  <footer>
    <div class="row">
      <div>
        © 2026 SimHealth. All rights reserved. •
        <a href="mailto:contact@simhealth.pro">contact@simhealth.pro</a>
      </div>
      <nav aria-label="Footer links">
        <a href="/sitemap.html">Sitemap</a>
        <a href="/en/legal/privacy/">Privacy</a>
        <a href="/en/legal/terms/">Terms</a>
        <a href="/en/legal/cookies/">Cookies</a>
        <a href="/en/legal/accessibility/">Accessibility</a>
        <a href="/en/legal/medical-disclaimer/">Medical Disclaimer</a>
      </nav>
    </div>
  </footer>

  <!-- Mobile always-visible crisis access (English pages only) -->
  <div class="mobile-crisis" aria-label="Crisis quick access">
    <span class="label">Need help now?</span>
    <a class="btn-primary" href="/en/patients/help-support/">Crisis Resources</a>
  </div>

  <script>
    const QUESTIONS = [
      "In the past 12 months, have you bet more than you could really afford to lose?",
      "In the past 12 months, have you needed to gamble with larger amounts of money to get the same feeling of excitement?",
      "In the past 12 months, when you gambled, did you go back another day to try to win back the money you lost?",
      "In the past 12 months, have you borrowed money or sold anything to get money to gamble?",
      "In the past 12 months, have you felt that you might have a problem with gambling?",
      "In the past 12 months, has gambling caused you any health problems, including stress or anxiety?",
      "In the past 12 months, have people criticised your betting or told you that you had a gambling problem, regardless of whether or not you thought it was true?",
      "In the past 12 months, has your gambling caused any financial problems for you or your household?",
      "In the past 12 months, have you felt guilty about the way you gamble or what happens when you gamble?"
    ];

    const OPTIONS = [
      { label: "Never (0)", value: 0, hint: "Not at all in the last 12 months." },
      { label: "Sometimes (1)", value: 1, hint: "Occasional / intermittent." },
      { label: "Most of the time (2)", value: 2, hint: "Frequent / recurring." },
      { label: "Almost always (3)", value: 3, hint: "Very frequent / near constant." }
    ];

    const form = document.getElementById("pgsiForm");
    const resultBox = document.getElementById("resultBox");
    const calcBtn = document.getElementById("calcBtn");
    const resetBtn = document.getElementById("resetBtn");

    function escapeHtml(s){
      return String(s)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    function buildForm(){
      form.innerHTML = "";
      QUESTIONS.forEach((q, idx) => {
        const wrap = document.createElement("div");
        wrap.className = "q";
        wrap.innerHTML = `
          <h3>${idx + 1}. ${escapeHtml(q)}</h3>
          <div class="options" role="radiogroup" aria-label="Question ${idx + 1}">
            ${OPTIONS.map((o) => `
              <label class="opt">
                <input type="radio" name="q${idx}" value="${o.value}" aria-label="${escapeHtml(o.label)}" />
                <div>
                  <b>${escapeHtml(o.label)}</b><br>
                  <span>${escapeHtml(o.hint)}</span>
                </div>
              </label>
            `).join("")}
          </div>
        `;
        form.appendChild(wrap);
      });
    }

    function getScore(){
      let score = 0;
      for(let i=0; i<QUESTIONS.length; i++){
        const checked = document.querySelector(`input[name="q${i}"]:checked`);
        if(!checked) return { ok:false, score:0, missing:i+1 };
        score += Number(checked.value);
      }
      return { ok:true, score };
    }

    function band(score){
      if(score === 0) return { label:"No problems (0)", cls:"good" };
      if(score <= 2) return { label:"Low risk (1–2)", cls:"good" };
      if(score <= 7) return { label:"Moderate risk (3–7)", cls:"warn" };
      return { label:"Problem gambling (8+)", cls:"risk" };
    }

    function renderResult(score){
      const b = band(score);

      let guidance = "";
      if(score === 0){
        guidance = `
          <p><strong>What this suggests:</strong> No reported gambling-related problems in the last 12 months on this screening tool.</p>
          <p>If you’re here because you feel worried anyway, trust that instinct — support can still help.</p>
        `;
      } else if(score <= 2){
        guidance = `
          <p><strong>What this suggests:</strong> Low risk on this screening tool, but some early signals may be present.</p>
          <p>If you notice urges escalating, consider setting boundaries and talking to a professional or support service early.</p>
        `;
      } else if(score <= 7){
        guidance = `
          <p><strong>What this suggests:</strong> Moderate risk. This score range is commonly associated with meaningful harm in day-to-day life.</p>
          <p><strong>Consider support:</strong> speaking with a clinician or contacting a gambling support service can be a strong next step.</p>
        `;
      } else {
        guidance = `
          <p><strong>What this suggests:</strong> A score of <strong>${score}</strong> is in the problem gambling range on this screening tool.</p>
          <p><strong>This is not a diagnosis</strong>, but it strongly suggests your gambling has been causing harm or distress.</p>
          <p>If you feel at risk of self-harm, please use crisis support immediately.</p>
        `;
      }

      const nextSteps = `
        <div class="row">
          <a class="btn-primary" href="/en/patients/help-support/">Crisis &amp; support resources</a>
          <a class="btn-secondary" href="/en/contact/">Contact (non-urgent)</a>
          <a class="btn-secondary" href="/en/patients/">Back to Patients</a>
        </div>
        <p class="fine" style="margin-top:10px;">
          Reminder: this reflects the <strong>last 12 months</strong>. If your situation has changed recently, your current needs may be different.
        </p>
      `;

      resultBox.className = `status show ${b.cls}`;
      resultBox.innerHTML = `
        <h4>Your score: ${score} — ${escapeHtml(b.label)}</h4>
        ${guidance}
        ${nextSteps}
      `;
      resultBox.scrollIntoView({ behavior:"smooth", block:"start" });
    }

    calcBtn.addEventListener("click", () => {
      const s = getScore();
      if(!s.ok){
        resultBox.className = "status show warn";
        resultBox.innerHTML = `
          <h4>Almost there</h4>
          <p>Please answer <strong>question ${s.missing}</strong> to calculate your score.</p>
        `;
        const qEl = document.querySelectorAll(".q")[s.missing - 1];
        if(qEl) qEl.scrollIntoView({ behavior:"smooth", block:"center" });
        return;
      }
      renderResult(s.score);
    });

    resetBtn.addEventListener("click", () => {
      form.reset();
      resultBox.className = "status";
      resultBox.innerHTML = "";
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    buildForm();
  </script>

</body>
</html>
